<div class="group-conversation-category-details">
	<div class="head-section" *ngIf="renderedOn === 'Desktop'">
		<div class="container">
			<div class="group-info-wrapper">
				<div class="link-go-back-wrapper">
					<a
						(click)="closeKeyWordCategory($event)"
						class="link-go-back"
						data-cs-id="0298b342-b7a8-4516-b187-c9903990c682"
						data-cs-label="Conversations"
						data-cs-source="page"
						data-test-id="back-button-conversations"
					>
						<svg width="10" height="11" viewBox="0 0 10 11" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M5.44212 1.56699C5.68619 1.32291 5.68619 0.927191 5.44212 0.683117C5.19804 0.439042 4.80232 0.439042 4.55824 0.683117L0.1833 5.05806C-0.0607745 5.30213 -0.0607745 5.69786 0.1833 5.94193L4.55824 10.3169C4.80232 10.561 5.19804 10.561 5.44212 10.3169C5.68619 10.0728 5.68619 9.67708 5.44212 9.433L2.1341 6.12498H9.37513C9.7203 6.12498 10.0001 5.84517 10.0001 5.49999C10.0001 5.15482 9.7203 4.875 9.37513 4.875H2.1341L5.44212 1.56699Z"
							/>
						</svg>
						Conversations
					</a>
				</div>
				<div class="category-header-info">
					<h5 data-test-id="heading-category-insights">
						Insights for <strong>‘{{ category }}’</strong> category
					</h5>
				</div>
			</div>
		</div>
	</div>

	<div class="mobile-header" *ngIf="renderedOn === 'Mobile'">
		<button class="back-btn" (click)="closeKeyWordCategory($event)">
			<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M19.0005 11H7.83047L12.7105 6.11997C13.1005 5.72997 13.1005 5.08997 12.7105 4.69997C12.3205 4.30997 11.6905 4.30997 11.3005 4.69997L4.71047 11.29C4.32047 11.68 4.32047 12.31 4.71047 12.7L11.3005 19.29C11.6905 19.68 12.3205 19.68 12.7105 19.29C13.1005 18.9 13.1005 18.27 12.7105 17.88L7.83047 13H19.0005C19.5505 13 20.0005 12.55 20.0005 12C20.0005 11.45 19.5505 11 19.0005 11Z"
					fill="#707084"
				/>
			</svg>
		</button>
		<div class="mobile-header-content">
			<h5>{{ category }}</h5>
		</div>
		<div style="width: 24px"></div>
	</div>

	<div class="category-insight-container">
		<div class="container">
			<h3 class="head-text" data-test-id="heading-summary-28-days">Summary for <strong>last 28 days</strong></h3>
			<div class="row">
				<div class="col-sm-4 col-12">
					<div class="metrics-wrapper">
						<ng-container *ngIf="summaryReportForLast30Days; else loadingTotalConversations">
							<div class="tooltip-wrapper">
								<app-tooltip setTooltipText="Last 28 days Conversations"></app-tooltip>
							</div>
							<h6 class="metric-name" data-test-id="heading-summary-conversations">Conversations</h6>
							<p class="metric-value" data-test-id="total-no-conversation-28days">
								{{ summaryReportForLast30Days.numOfConversations }}
							</p>
						</ng-container>
						<ng-template #loadingTotalConversations>
							<div class="loading-strip primary"></div>
							<div class="loading-strip secondary"></div>
						</ng-template>
					</div>
				</div>

				<div class="col-sm-4 col-12">
					<div class="metrics-wrapper">
						<ng-container *ngIf="summaryReportForLast30Days; else loadingTotalComments">
							<h6 class="metric-name" data-test-id="heading-summary-comments">Comments</h6>
							<p class="metric-value" data-test-id="total-no-comments-28days">
								{{ summaryReportForLast30Days.numOfComments }}
							</p>
						</ng-container>
						<ng-template #loadingTotalComments>
							<div class="loading-strip primary"></div>
							<div class="loading-strip secondary"></div>
						</ng-template>
					</div>
				</div>

				<div class="col-sm-4 col-12">
					<div class="metrics-wrapper">
						<ng-container *ngIf="summaryReportForLast30Days; else loadingTotalPosts">
							<h6 class="metric-name" data-test-id="heading-summary-post">Posts</h6>
							<p class="metric-value" data-test-id="total-no-posts-28days">
								{{ summaryReportForLast30Days.numOfPosts }}
							</p>
						</ng-container>
						<ng-template #loadingTotalPosts>
							<div class="loading-strip primary"></div>
							<div class="loading-strip secondary"></div>
						</ng-template>
					</div>
				</div>
			</div>
		</div>

		<div class="fixed-tabs">
			<div class="container">
				<div class="row">
					<div class="col">
						<ul
							class="nav nav-tabs graph-tabs"
							id="categoryInsightsTab"
							role="tablist"
							data-test-id="trends-months-range"
						>
							<li class="nav-item">
								<span class="description" href="javascript:void(0);">Trends for:</span>
							</li>
							<li class="nav-item">
								<button
									class="btn-month"
									[class.active]="selectedMonth === 'currentMonth'"
									data-toggle="tab"
									(click)="changeSelectedTab('currentMonth'); recordButtonClick($event, group)"
									data-cs-id="563d6932-7ea8-44b2-ab41-3d2b736ba71c"
									data-cs-label="Current Month"
									role="tab"
									aria-controls="currentmonth"
									aria-selected="true"
									data-cs-source="page"
									data-test-id="trends-Current-month-range"
								>
									Current Month
								</button>
							</li>
							<li class="nav-item">
								<button
									class="btn-month"
									[class.active]="selectedMonth === 'lastMonth'"
									data-toggle="tab"
									(click)="changeSelectedTab('lastMonth'); recordButtonClick($event, group)"
									data-cs-id="cb3eb598-fe37-442e-9ed5-856a6b433b73"
									data-cs-label="Last 1 month"
									role="tab"
									aria-controls="1month"
									aria-selected="false"
									data-cs-source="page"
									data-test-id="trends-last-month-range"
								>
									Last 1 month
								</button>
							</li>
							<li class="nav-item">
								<button
									class="btn-month"
									[class.active]="selectedMonth === 'lastSecondMonth'"
									data-toggle="tab"
									(click)="changeSelectedTab('lastSecondMonth'); recordButtonClick($event, group)"
									data-cs-id="90f45c16-f1dd-40b6-9fba-e5c2e50c7410"
									data-cs-label="Last 2 months"
									role="tab"
									aria-controls="2months"
									aria-selected="false"
									data-cs-source="page"
									data-test-id="trends-last-2month-range"
								>
									Last 2 months
								</button>
							</li>
							<li class="nav-item">
								<button
									class="btn-month"
									[class.active]="selectedMonth === 'lastThirdMonth'"
									data-toggle="tab"
									(click)="changeSelectedTab('lastThirdMonth'); recordButtonClick($event, group)"
									data-cs-id="4a0c5d47-014f-4713-92e7-734a19dae7ed"
									data-cs-label="Last 3 months"
									role="tab"
									aria-controls="3months"
									aria-selected="false"
									data-cs-source="page"
									data-test-id="trends-last-3month-range"
								>
									Last 3 months
								</button>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<div class="tab-content">
			<div class="container">
				<div class="row">
					<div class="col-sm-6 col-12 mt-4">
						<div class="card border-0" data-test-id="category-breakup-pie-chart">
							<div class="card-header border-0">
								<h4 class="font-weight-normal" data-test-id="heading-category-breakup-pie-chart">
									Category breakup in
									<span class="font-weight-medium">‘{{ category }}’</span>
								</h4>
							</div>
							<div class="card-body card-min-height">
								<div class="position-static" *ngIf="selectedMonth === 'currentMonth'">
									<div
										*ngIf="pieChartForCurrentMonth; else loadingCategoryReport"
										data-test-id="category-breakup-pie-chart-current-month"
									>
										<div
											*ngIf="pieChartForCurrentMonth.chartOptions.series[0].data.length > 0; else emptyCategoryReport"
										>
											<div class="row align-items-center">
												<div class="col-sm-8">
													<app-high-chart [chartData]="pieChartForCurrentMonth.chartOptions"></app-high-chart>
												</div>
												<div class="col-sm-4">
													<div class="legend-wrapper">
														<div class="legend post">
															<div class="legend-marker-box color-1"></div>
															<span class="legend-text">Products</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-2"></div>
															<span class="legend-text">Brands</span>
														</div>
														<div class="legend reactions">
															<div class="legend-marker-box color-3"></div>
															<span class="legend-text">Remedies</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-4"></div>
															<span class="legend-text">Issues</span>
														</div>
													</div>
												</div>
											</div>
										</div>
										<ng-template #emptyCategoryReport>
											<div class="no-data-wrapper">
												<img alt="" class="no-data-img" src="assets/images/empty_state_icon.svg" />
												<p class="primary-text">No data for selected time period</p>
												<p class="secondary-text">Select another time period</p>
											</div>
										</ng-template>
									</div>
									<ng-template #loadingCategoryReport>
										<div class="loader-wrapper">
											<div class="loader"></div>
											<p class="loading-text">Loading data</p>
										</div>
									</ng-template>
								</div>

								<div class="position-static" *ngIf="selectedMonth === 'lastMonth'">
									<div *ngIf="pieChartForLastMonth; else loadingCategoryReport">
										<div
											*ngIf="
												(pieChartForLastMonth?.chartOptions?.series)[0]?.data?.length > 0;
												else emptyCategoryReport
											"
										>
											<div class="row align-items-center">
												<div class="col-sm-8">
													<app-high-chart [chartData]="pieChartForLastMonth.chartOptions"></app-high-chart>
												</div>
												<div class="col-sm-4">
													<div class="legend-wrapper">
														<div class="legend post">
															<div class="legend-marker-box color-1"></div>
															<span class="legend-text">Products</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-2"></div>
															<span class="legend-text">Brands</span>
														</div>
														<div class="legend reactions">
															<div class="legend-marker-box color-3"></div>
															<span class="legend-text">Remedies</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-4"></div>
															<span class="legend-text">Issues</span>
														</div>
													</div>
												</div>
											</div>
										</div>
										<ng-template #emptyCategoryReport>
											<div class="no-data-wrapper">
												<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
												<p class="primary-text">No data for selected time period</p>
												<p class="secondary-text">Select another time period</p>
											</div>
										</ng-template>
									</div>
									<ng-template #loadingCategoryReport>
										<div class="loader-wrapper">
											<div class="loader"></div>
											<p class="loading-text">Loading data</p>
										</div>
									</ng-template>
								</div>

								<div class="position-static" *ngIf="selectedMonth === 'lastSecondMonth'">
									<div *ngIf="pieChartForLastTwoMonths; else loadingCategoryReport">
										<div
											*ngIf="
												(pieChartForLastTwoMonths?.chartOptions?.series)[0]?.data?.length > 0;
												else emptyCategoryReport
											"
										>
											<div class="row align-items-center">
												<div class="col-sm-8">
													<app-high-chart [chartData]="pieChartForLastTwoMonths.chartOptions"></app-high-chart>
												</div>
												<div class="col-sm-4">
													<div class="legend-wrapper">
														<div class="legend post">
															<div class="legend-marker-box color-1"></div>
															<span class="legend-text">Products</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-2"></div>
															<span class="legend-text">Brands</span>
														</div>
														<div class="legend reactions">
															<div class="legend-marker-box color-3"></div>
															<span class="legend-text">Remedies</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-4"></div>
															<span class="legend-text">Issues</span>
														</div>
													</div>
												</div>
											</div>
										</div>
										<ng-template #emptyCategoryReport>
											<div class="no-data-wrapper">
												<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
												<p class="primary-text">No data for selected time period</p>
												<p class="secondary-text">Select another time period</p>
											</div>
										</ng-template>
									</div>
									<ng-template #loadingCategoryReport>
										<div class="loader-wrapper">
											<div class="loader"></div>
											<p class="loading-text">Loading data</p>
										</div>
									</ng-template>
								</div>

								<div class="position-static" *ngIf="selectedMonth === 'lastThirdMonth'">
									<div *ngIf="pieChartForLastThreeMonths; else loadingCategoryReport">
										<div
											*ngIf="
												(pieChartForLastThreeMonths?.chartOptions?.series)[0]?.data?.length > 0;
												else emptyCategoryReport
											"
										>
											<div class="row align-items-center">
												<div class="col-sm-8">
													<app-high-chart [chartData]="pieChartForLastThreeMonths.chartOptions"></app-high-chart>
												</div>
												<div class="col-sm-4">
													<div class="legend-wrapper">
														<div class="legend post">
															<div class="legend-marker-box color-1"></div>
															<span class="legend-text">Products</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-2"></div>
															<span class="legend-text">Brands</span>
														</div>
														<div class="legend reactions">
															<div class="legend-marker-box color-3"></div>
															<span class="legend-text">Remedies</span>
														</div>
														<div class="legend comments">
															<div class="legend-marker-box color-4"></div>
															<span class="legend-text">Issues</span>
														</div>
													</div>
												</div>
											</div>
										</div>
										<ng-template #emptyCategoryReport>
											<div class="no-data-wrapper">
												<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
												<p class="primary-text">No data for selected time period</p>
												<p class="secondary-text">Select another time period</p>
											</div>
										</ng-template>
									</div>
									<ng-template #loadingCategoryReport>
										<div class="loader-wrapper">
											<div class="loader"></div>
											<p class="loading-text">Loading data</p>
										</div>
									</ng-template>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-6 col-12 mt-4">
						<div class="card border-0" data-test-id="graph-top-keyowrd-breakUp">
							<div class="card-header border-0">
								<h4 class="font-weight-normal" data-test-id="heading-graph-top-keyowrd-breakUp">
									Top keywords in
									<span class="font-weight-medium">‘{{ category }}’</span>
								</h4>
							</div>
							<div class="card-body card-min-height" *ngIf="selectedMonth === 'currentMonth'">
								<div *ngIf="barChartForCurrentMonth; else loadingCategoryReport">
									<div *ngIf="barChartForCurrentMonth.chartOptions.series[0].data.length > 0; else emptyCategoryReport">
										<app-high-chart [chartData]="barChartForCurrentMonth.chartOptions"></app-high-chart>
									</div>
									<ng-template #emptyCategoryReport>
										<div class="no-data-wrapper">
											<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
											<p class="primary-text">No data for selected time period</p>
											<p class="secondary-text">Select another time period</p>
										</div>
									</ng-template>
								</div>
								<ng-template #loadingCategoryReport>
									<div class="loader-wrapper">
										<div class="loader"></div>
										<p class="loading-text">Loading data</p>
									</div>
								</ng-template>
							</div>
							<div class="card-body card-min-height" *ngIf="selectedMonth === 'lastMonth'">
								<div *ngIf="barChartForLastMonth; else loadingCategoryReport">
									<div
										*ngIf="(barChartForLastMonth?.chartOptions?.series)[0]?.data?.length > 0; else emptyCategoryReport"
									>
										<app-high-chart [chartData]="barChartForLastMonth.chartOptions"></app-high-chart>
									</div>
									<ng-template #emptyCategoryReport>
										<div class="no-data-wrapper">
											<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
											<p class="primary-text">No data for selected time period</p>
											<p class="secondary-text">Select another time period</p>
										</div>
									</ng-template>
								</div>
								<ng-template #loadingCategoryReport>
									<div class="loader-wrapper">
										<div class="loader"></div>
										<p class="loading-text">Loading data</p>
									</div>
								</ng-template>
							</div>
							<div class="card-body card-min-height" *ngIf="selectedMonth === 'lastSecondMonth'">
								<div *ngIf="barChartForLastTwoMonths; else loadingCategoryReport">
									<div
										*ngIf="
											(barChartForLastTwoMonths?.chartOptions?.series)[0]?.data?.length > 0;
											else emptyCategoryReport
										"
									>
										<app-high-chart [chartData]="barChartForLastTwoMonths.chartOptions"></app-high-chart>
									</div>
									<ng-template #emptyCategoryReport>
										<div class="no-data-wrapper">
											<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
											<p class="primary-text">No data for selected time period</p>
											<p class="secondary-text">Select another time period</p>
										</div>
									</ng-template>
								</div>
								<ng-template #loadingCategoryReport>
									<div class="loader-wrapper">
										<div class="loader"></div>
										<p class="loading-text">Loading data</p>
									</div>
								</ng-template>
							</div>
							<div class="card-body card-min-height" *ngIf="selectedMonth === 'lastThirdMonth'">
								<div *ngIf="barChartForLastThreeMonths; else loadingCategoryReport">
									<div
										*ngIf="
											(barChartForLastThreeMonths?.chartOptions?.series)[0]?.data?.length > 0;
											else emptyCategoryReport
										"
									>
										<app-high-chart [chartData]="barChartForLastThreeMonths.chartOptions"></app-high-chart>
									</div>
									<ng-template #emptyCategoryReport>
										<div class="no-data-wrapper">
											<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
											<p class="primary-text">No data for selected time period</p>
											<p class="secondary-text">Select another time period</p>
										</div>
									</ng-template>
								</div>
								<ng-template #loadingCategoryReport>
									<div class="loader-wrapper">
										<div class="loader"></div>
										<p class="loading-text">Loading data</p>
									</div>
								</ng-template>
							</div>
						</div>
					</div>
				</div>

				<h3 class="head-text mt-5" data-test-id="heading-top-keywords">
					Top keywords for <strong>last 3 months</strong>
				</h3>

				<div class="row mb-5">
					<div class="col-sm-4 col-12 mt-4">
						<div class="card border-0">
							<div class="card-header border-0">
								<h4 data-test-id="word-cloud-current-month" class="font-weight-medium">
									{{ getMonthDisplayNameForChart(3) }}
								</h4>
							</div>
							<div class="card-body card-min-height">
								<div *ngIf="wordCloudForThirdMonth; else loadingCategoryReport">
									<div *ngIf="wordCloudForThirdMonth.wordCloudData; else emptyCategoryReport">
										<img
											alt=""
											data-test-id="word-cloud-current-month-image"
											class="word-cloud-wrapper"
											src="{{ wordCloudForThirdMonth.wordCloudData }}"
										/>
									</div>
									<ng-template #emptyCategoryReport>
										<div class="no-data-wrapper">
											<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
											<p class="primary-text">No data for selected time period</p>
											<p class="secondary-text">Select another time period</p>
										</div>
									</ng-template>
								</div>
								<ng-template #loadingCategoryReport>
									<div class="loader-wrapper">
										<div class="loader"></div>
										<p class="loading-text">Loading data</p>
									</div>
								</ng-template>
							</div>
						</div>
					</div>

					<div class="col-sm-4 col-12 mt-4">
						<div class="card border-0">
							<div class="card-header border-0">
								<h4 data-test-id="word-cloud-last-month" class="font-weight-medium">
									{{ getMonthDisplayNameForChart(2) }}
								</h4>
							</div>
							<div class="card-body card-min-height">
								<div *ngIf="wordCloudForSecondMonth; else loadingCategoryReport">
									<div *ngIf="wordCloudForSecondMonth.wordCloudData; else emptyCategoryReport">
										<img
											alt=""
											data-test-id="word-cloud-last-month-image"
											class="word-cloud-wrapper"
											src="{{ wordCloudForSecondMonth.wordCloudData }}"
										/>
									</div>
									<ng-template #emptyCategoryReport>
										<div class="no-data-wrapper">
											<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
											<p class="primary-text">No data for selected time period</p>
											<p class="secondary-text">Select another time period</p>
										</div>
									</ng-template>
								</div>
								<ng-template #loadingCategoryReport>
									<div class="loader-wrapper">
										<div class="loader"></div>
										<p class="loading-text">Loading data</p>
									</div>
								</ng-template>
							</div>
						</div>
					</div>

					<div class="col-sm-4 col-12 mt-4">
						<div class="card border-0">
							<div class="card-header border-0">
								<h4 data-test-id="word-cloud-last2-month" class="font-weight-medium">
									{{ getMonthDisplayNameForChart(1) }}
								</h4>
							</div>
							<div class="card-body card-min-height">
								<div *ngIf="wordCloudForLastMonth; else loadingCategoryReport">
									<div *ngIf="wordCloudForLastMonth.wordCloudData; else emptyCategoryReport">
										<img
											alt=""
											data-test-id="word-cloud-last2-month-image"
											class="word-cloud-wrapper"
											src="{{ wordCloudForLastMonth.wordCloudData }}"
										/>
									</div>
									<ng-template #emptyCategoryReport>
										<div class="no-data-wrapper">
											<img alt="" class="no-data-img" src="assets/images/empty_graph.svg" />
											<p class="primary-text">No data for selected time period</p>
											<p class="secondary-text">Select another time period</p>
										</div>
									</ng-template>
								</div>
								<ng-template #loadingCategoryReport>
									<div class="loader-wrapper">
										<div class="loader"></div>
										<p class="loading-text">Loading data</p>
									</div>
								</ng-template>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
