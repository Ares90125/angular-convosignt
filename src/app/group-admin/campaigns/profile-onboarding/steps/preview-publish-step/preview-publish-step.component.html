<div class="onboarding-head">
	<button
		class="back-button"
		data-cs-id="6af524d6-5064-4523-bc90-30200e24443f"
		(click)="
			recordButtonClick($event, null, null, {
				current_step: 4,
				onboarding_type: this.isPitch ? 'pitch' : 'profile'
			})
		"
		data-cs-label="Prev page"
		data-cs-source="page"
		type="button"
		[routerLink]="'/group-admin/campaigns/' + groupProfilePage?.groupId + '/profile-pages/'"
	>
		<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M19.0005 11.0007H7.83047L12.7105 6.1207C13.1005 5.7307 13.1005 5.0907 12.7105 4.7007C12.3205 4.3107 11.6905 4.3107 11.3005 4.7007L4.71047 11.2907C4.32047 11.6807 4.32047 12.3107 4.71047 12.7007L11.3005 19.2907C11.6905 19.6807 12.3205 19.6807 12.7105 19.2907C13.1005 18.9007 13.1005 18.2707 12.7105 17.8807L7.83047 13.0007H19.0005C19.5505 13.0007 20.0005 12.5507 20.0005 12.0007C20.0005 11.4507 19.5505 11.0007 19.0005 11.0007Z"
				fill="#707084"
			/>
		</svg>
	</button>
	<div *ngIf="groupProfilePage" class="head-profile-data">
		<div class="head-profile-image">
			<img
				[fbEntityId]="groupProfilePage?.fbGroupId"
				alt=""
				class="banner-background"
				src="{{ groupProfilePage?.coverImageUrl }}"
			/>
		</div>
		<div class="head-profile-description">
			<h5 class="head-name-profile">
				{{ groupProfilePage?.name }}
			</h5>
			<span> {{ groupProfilePage?.keyStats.totalMembers | shortNumber }} members </span>
		</div>
	</div>
	<app-loading-shimmer *ngIf="!groupProfilePage" [type]="4"></app-loading-shimmer>
</div>

<div class="preview-step-wrap">
	<div class="preview-header-wrap">
		<h1>
			{{ isPitch ? 'Are you ready to publish your brand pitch?' : 'Are you ready to publish your group profile?' }}
		</h1>
		<svg width="78" height="4" viewBox="0 0 78 4" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M76.8643 3C74.5916 3 74.5916 1 72.4096 1C70.137 1 70.137 3 67.955 3C65.6824 3 65.6824 1 63.5004 0.999999C61.2278 0.999999 61.2278 3 59.0458 3C56.7732 3 56.7732 0.999999 54.5912 0.999999C52.4092 0.999999 52.4092 3 50.1366 3C47.8639 3 47.8639 0.999999 45.6819 0.999999C43.5 0.999999 43.5 3 41.2273 3C38.9547 3 38.9547 0.999998 36.7727 0.999998C34.5001 0.999998 34.5001 3 32.3181 3C30.0455 3 30.0455 0.999998 27.8635 0.999998C25.5909 0.999998 25.5909 3 23.4089 3C21.1362 3 21.1362 0.999998 18.9543 0.999997C16.6816 0.999997 16.6816 3 14.4996 3C12.227 3 12.227 0.999997 10.045 0.999997C7.77239 0.999997 7.77239 3 5.5904 3C3.40841 3 3.31778 0.999997 1.13579 0.999997"
				stroke="#ADADB9"
				stroke-miterlimit="10"
				stroke-linecap="round"
				stroke-linejoin="round"
			/>
		</svg>
		<p *ngIf="isPitch">
			<strong>Your brand pitch is saved</strong> but not published. Publish your pitch now to share it with brands.
		</p>
		<p *ngIf="!isPitch">
			<strong>Your group profile is saved</strong> but not published. Publish your profile now to share it with your
			members and start getting reviews.
		</p>
	</div>
	<div *ngIf="!isPitch && isSectionSkipped" class="skipped-section-message">
		<div class="skipped-section-description">
			<h5>It seems you've skipped some sections Brands look for.</h5>
			<p>
				Fill out the most important sections of your group profile like overview, topics and featured conversations
				before sharing.
			</p>
		</div>
		<button
			class="continue-edit-btn"
			data-cs-id="4556c044-4f02-4499-95b7-a66563706646"
			(click)="recordButtonClick($event)"
			data-cs-label="Continue editing"
			data-cs-source="page"
			[routerLink]="
				'/group-admin/campaigns/' + groupProfilePage?.groupId + '/profile-pages/' + groupProfilePage?.id + '/edit'
			"
		>
			<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					d="M2 12.1397V14.1664C2 14.353 2.14667 14.4997 2.33333 14.4997H4.36C4.44667 14.4997 4.53333 14.4664 4.59333 14.3997L11.8733 7.12638L9.37333 4.62638L2.1 11.8997C2.03333 11.9664 2 12.0464 2 12.1397ZM13.8067 5.19305C14.0667 4.93305 14.0667 4.51305 13.8067 4.25305L12.2467 2.69305C11.9867 2.43305 11.5667 2.43305 11.3067 2.69305L10.0867 3.91305L12.5867 6.41305L13.8067 5.19305Z"
					fill="white"
				/>
			</svg>
			<span>Continue editing</span>
		</button>
	</div>
	<div class="preview-frame-wrap">
		<div
			class="preview-frame"
			style.background-image="url({{ groupProfilePage?.coverImageUrl || 'assets/images/default_group_image.jpg' }})"
		></div>
		<div class="preview-panel">
			<h5>{{ groupProfilePage?.name }}</h5>
			<p>
				<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path
						d="M10.668 7.33398C11.7746 7.33398 12.6613 6.44065 12.6613 5.33398C12.6613 4.22732 11.7746 3.33398 10.668 3.33398C9.5613 3.33398 8.66797 4.22732 8.66797 5.33398C8.66797 6.44065 9.5613 7.33398 10.668 7.33398ZM5.33464 7.33398C6.4413 7.33398 7.32797 6.44065 7.32797 5.33398C7.32797 4.22732 6.4413 3.33398 5.33464 3.33398C4.22797 3.33398 3.33464 4.22732 3.33464 5.33398C3.33464 6.44065 4.22797 7.33398 5.33464 7.33398ZM5.33464 8.66732C3.7813 8.66732 0.667969 9.44732 0.667969 11.0007V12.0007C0.667969 12.3673 0.967969 12.6673 1.33464 12.6673H9.33463C9.7013 12.6673 10.0013 12.3673 10.0013 12.0007V11.0007C10.0013 9.44732 6.88797 8.66732 5.33464 8.66732ZM10.668 8.66732C10.4746 8.66732 10.2546 8.68065 10.0213 8.70065C10.0346 8.70732 10.0413 8.72065 10.048 8.72732C10.808 9.28065 11.3346 10.0207 11.3346 11.0007V12.0007C11.3346 12.234 11.288 12.4607 11.2146 12.6673H14.668C15.0346 12.6673 15.3346 12.3673 15.3346 12.0007V11.0007C15.3346 9.44732 12.2213 8.66732 10.668 8.66732Z"
						fill="#707084"
					/>
				</svg>
				{{ groupProfilePage?.keyStats.totalMembers | shortNumber }}
				{{ groupProfilePage?.keyStats.totalMembers === 1 ? 'member' : 'members' }}
				<svg
					class="separate-circle"
					width="2"
					height="2"
					viewBox="0 0 2 2"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<circle cx="1" cy="1" r="1" fill="#707084" />
				</svg>
				{{ groupProfilePage?.groupPrivacyType !== 'OPEN' ? 'Private' : 'Public' }} Facebook group
			</p>
			<button
				class="convo-btn-outline convo-btn-normal"
				(click)="recordButtonClick($event)"
				data-cs-id="fb644dd7-a3f3-4b5f-81ef-a748eba80268"
				data-cs-label="Preview profile"
				data-cs-source="page"
				[routerLink]="
					'/group-admin/campaigns/' +
					groupProfilePage?.groupId +
					'/profile-pages/' +
					groupProfilePage?.id +
					(isPitch ? '/pitch-onboarding' : '/profile-onboarding') +
					'/preview'
				"
			>
				<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path
						d="M8.5013 3C5.16797 3 2.3213 5.07333 1.16797 8C2.3213 10.9267 5.16797 13 8.5013 13C11.8346 13 14.6813 10.9267 15.8346 8C14.6813 5.07333 11.8346 3 8.5013 3ZM8.5013 11.3333C6.6613 11.3333 5.16797 9.84 5.16797 8C5.16797 6.16 6.6613 4.66667 8.5013 4.66667C10.3413 4.66667 11.8346 6.16 11.8346 8C11.8346 9.84 10.3413 11.3333 8.5013 11.3333ZM8.5013 6C7.39464 6 6.5013 6.89333 6.5013 8C6.5013 9.10667 7.39464 10 8.5013 10C9.60797 10 10.5013 9.10667 10.5013 8C10.5013 6.89333 9.60797 6 8.5013 6Z"
						fill="#3654FF"
					/>
				</svg>
				<span>
					{{ isPitch ? 'Preview pitch' : 'Preview profile' }}
				</span>
			</button>
			<button
				(click)="emitPublishProfileClick($event)"
				class="convo-btn-primary convo-btn-normal"
				data-cs-id="a179a49f-2e53-4674-9e78-477a40d6bda1"
				data-cs-label="Publish now"
				data-cs-source="page"
			>
				<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path
						d="M7.99818 13.4749L4.52318 9.99987L3.33984 11.1749L7.99818 15.8332L17.9982 5.8332L16.8232 4.6582L7.99818 13.4749Z"
						fill="white"
					/>
				</svg>
				<span *ngIf="!isSaveInProgress">Publish now</span>
				<span class="btn-spinner" *ngIf="isSaveInProgress"></span>
			</button>
		</div>
	</div>
	<app-onboarding-step-nav
		[currentStep]="3"
		[isPitch]="isPitch"
		[extraRecordEventData]="extraRecordEventData"
		[fetching]="stageFetching"
		(nextStep)="nextStepHandler()"
		(prevStep)="prevStepHandler()"
	></app-onboarding-step-nav>
</div>
